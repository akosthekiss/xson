language: python

install: pip install -U tox
script: tox -v

jobs:
  include:
    - stage: test
      python: 3.4
      env: TOXENV=py
    - python: 3.5
      env: TOXENV=py
    - python: 3.6
      env: TOXENV=py
    - python: 3.7
      env: TOXENV=py
      dist: xenial
    - python: 3.4
      env: TOXENV=lint

    - stage: coverage
      python: 3.4
      env: TOXENV=cov
      before_script: pip install -U coveralls
      after_success: coveralls

    - stage: deploy
      python: 3.4
      install: skip
      script: skip
      deploy:
        provider: pypi
        user: renatahodovan
        password:
          secure: P0JHu+0phcyktvmrlbw/quDF/mY4NDmZI2LhshYh6q7YqzT+NuMFP4iFdFUH4Kft3CzPZsic+tGQ9ofQuwrGx3giHWBQXn6EFyH3YF4WSeKMObW2pyqI7W7pjhnJyY7IgnZAOhXmTGx2t2RYH19oME/Go93tFtohLv2WxJlcYl9JAkASeNAfMlfsgWdX9w1tbE8Fu9mIVFfGJIU/IRfN0cYRgmZeLXPEkLymPQ0m+zHwLYs7OewXSGLBWdt2Xt5Em9HlqxMSfjjGYM9dxfFdLwmcZ4sKggveZu1EU3guAzVU4b9mKe/hWQeR6UAHedYJZj6T3AQQXcMzLTgdQBSv7T39/ILUDzWUvBxM052Lsh2eaaEUGn2aBg7GnEWpRfOUYSQYzO6SfEma+Ihv2DeN6PWTskDLTkck8mM019miAvlQN1Ff6V9YV2Qpo0QMQb0V3mkis65TLkSgbh2/LsCKou71znabalBCGbwCgOI9u5rfki5Tq8U5VIXNaCKhYeijETiDPZRfUKZN/IzcNlW3MAhN3RVBNiCwnj9tidG30Nv1lQ0e2IyTk/PgVD+zNj9Xh8wbA6SSsahONU0nU3YsIhCCJZoIFjSqVJqFdl8FLaAvMBYwGSIGwBc+5JaFdVzKthrlmp1JhVYSRWI5GWh1L6vS6EZ9Tt4H34CwQJIoG0o=
        on:
          repo: renatahodovan/xson
          tags: true
